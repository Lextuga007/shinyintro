<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Structuring a complex app | Building Web Apps with R Shiny</title>
  <meta name="description" content="This class will teach you the basics of Shiny app programming, giving you skills that will form the basis of almost any app you want to build. By the end of the class, you will have created a custom app that collects and saves data, allows users to dynamically visualize the data, and produces downloadable reports." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Structuring a complex app | Building Web Apps with R Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This class will teach you the basics of Shiny app programming, giving you skills that will form the basis of almost any app you want to build. By the end of the class, you will have created a custom app that collects and saves data, allows users to dynamically visualize the data, and produces downloadable reports." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Structuring a complex app | Building Web Apps with R Shiny" />
  
  <meta name="twitter:description" content="This class will teach you the basics of Shiny app programming, giving you skills that will form the basis of almost any app you want to build. By the end of the class, you will have created a custom app that collects and saves data, allows users to dynamically visualize the data, and produces downloadable reports." />
  

<meta name="author" content="Lisa DeBruine" />


<meta name="date" content="2021-07-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="web.html"/>
<link rel="next" href="debugging.html"/>
<script src="libs/header-attrs-2.9.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<meta property="og:title" content="ShinyIntro">
<meta property="og:description" content="8 Structuring a complex app | Building Web Apps with R Shiny">
<meta property="og:image" content="https://debruine.github.io/shinyintro/images/shinyintro_card.png">
<meta property="og:url" content="https://debruine.github.io/shinyintro/">
<meta property="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="https://debruine.github.io/shinyintro/images/shinyintro.png">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Building Web Apps with R Shiny</a></li>
<li><a href="https://zenodo.org/badge/latestdoi/166559207"><img src="https://zenodo.org/badge/166559207.svg" alt="DOI"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#installing-shinyintro"><i class="fa fa-check"></i><b>0.1</b> Installing shinyintro</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#example-apps"><i class="fa fa-check"></i><b>0.2</b> Example Apps</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#code-horizons-course-27-30-july-2021"><i class="fa fa-check"></i><b>0.3</b> Code Horizons Course (27-30 July 2021)</a>
<ul>
<li class="chapter" data-level="0.3.1" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i><b>0.3.1</b> Schedule</a></li>
</ul></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#computing"><i class="fa fa-check"></i><b>0.4</b> Computing</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#who-should-register"><i class="fa fa-check"></i><b>0.5</b> Who Should Register?</a></li>
<li class="chapter" data-level="0.6" data-path="index.html"><a href="index.html#conventions"><i class="fa fa-check"></i><b>0.6</b> Conventions</a></li>
<li class="chapter" data-level="0.7" data-path="index.html"><a href="index.html#further-resources"><i class="fa fa-check"></i><b>0.7</b> Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="first-app.html"><a href="first-app.html"><i class="fa fa-check"></i><b>1</b> Your First Shiny App</a>
<ul>
<li class="chapter" data-level="1.1" data-path="first-app.html"><a href="first-app.html#the-demo-app"><i class="fa fa-check"></i><b>1.1</b> The Demo App</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="first-app.html"><a href="first-app.html#set-up-the-demo-app"><i class="fa fa-check"></i><b>1.1.1</b> Set Up the Demo App</a></li>
<li class="chapter" data-level="1.1.2" data-path="first-app.html"><a href="first-app.html#modify-the-demo-app"><i class="fa fa-check"></i><b>1.1.2</b> Modify the Demo App</a></li>
<li class="chapter" data-level="1.1.3" data-path="first-app.html"><a href="first-app.html#add-new-things"><i class="fa fa-check"></i><b>1.1.3</b> Add New Things</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="first-app.html"><a href="first-app.html#app-structure"><i class="fa fa-check"></i><b>1.2</b> App Structure</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="first-app.html"><a href="first-app.html#ui"><i class="fa fa-check"></i><b>1.2.1</b> UI</a></li>
<li class="chapter" data-level="1.2.2" data-path="first-app.html"><a href="first-app.html#tags"><i class="fa fa-check"></i><b>1.2.2</b> Tags</a></li>
<li class="chapter" data-level="1.2.3" data-path="first-app.html"><a href="first-app.html#page-layout"><i class="fa fa-check"></i><b>1.2.3</b> Page Layout</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="first-app.html"><a href="first-app.html#dynamic-elements"><i class="fa fa-check"></i><b>1.3</b> Dynamic Elements</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="first-app.html"><a href="first-app.html#inputs-intro"><i class="fa fa-check"></i><b>1.3.1</b> Inputs</a></li>
<li class="chapter" data-level="1.3.2" data-path="first-app.html"><a href="first-app.html#outputs-intro"><i class="fa fa-check"></i><b>1.3.2</b> Outputs</a></li>
<li class="chapter" data-level="1.3.3" data-path="first-app.html"><a href="first-app.html#action-buttons"><i class="fa fa-check"></i><b>1.3.3</b> Action buttons</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="first-app.html"><a href="first-app.html#first-reactive"><i class="fa fa-check"></i><b>1.4</b> Reactive functions</a></li>
<li class="chapter" data-level="1.5" data-path="first-app.html"><a href="first-app.html#resources-first-app"><i class="fa fa-check"></i><b>1.5</b> Further Resources</a></li>
<li class="chapter" data-level="1.6" data-path="first-app.html"><a href="first-app.html#exercises-first-app"><i class="fa fa-check"></i><b>1.6</b> Exercises</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="first-app.html"><a href="first-app.html#addition-app---ui"><i class="fa fa-check"></i><b>1.6.1</b> Addition App - UI</a></li>
<li class="chapter" data-level="1.6.2" data-path="first-app.html"><a href="first-app.html#observeevent"><i class="fa fa-check"></i><b>1.6.2</b> observeEvent</a></li>
<li class="chapter" data-level="1.6.3" data-path="first-app.html"><a href="first-app.html#reactive"><i class="fa fa-check"></i><b>1.6.3</b> reactive</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="shinydashboard.html"><a href="shinydashboard.html"><i class="fa fa-check"></i><b>2</b> ShinyDashboard</a>
<ul>
<li class="chapter" data-level="2.1" data-path="shinydashboard.html"><a href="shinydashboard.html#basic-template-for-shinydashboard-projects"><i class="fa fa-check"></i><b>2.1</b> Basic template for shinydashboard projects</a></li>
<li class="chapter" data-level="2.2" data-path="shinydashboard.html"><a href="shinydashboard.html#dashboard-structure"><i class="fa fa-check"></i><b>2.2</b> Dashboard Structure</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="shinydashboard.html"><a href="shinydashboard.html#dashboardheader"><i class="fa fa-check"></i><b>2.2.1</b> dashboardHeader</a></li>
<li class="chapter" data-level="2.2.2" data-path="shinydashboard.html"><a href="shinydashboard.html#dashboardsidebar"><i class="fa fa-check"></i><b>2.2.2</b> dashboardSidebar</a></li>
<li class="chapter" data-level="2.2.3" data-path="shinydashboard.html"><a href="shinydashboard.html#dashboardbody"><i class="fa fa-check"></i><b>2.2.3</b> dashboardBody</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="shinydashboard.html"><a href="shinydashboard.html#body-structure"><i class="fa fa-check"></i><b>2.3</b> Body Structure</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="shinydashboard.html"><a href="shinydashboard.html#boxes"><i class="fa fa-check"></i><b>2.3.1</b> Boxes</a></li>
<li class="chapter" data-level="2.3.2" data-path="shinydashboard.html"><a href="shinydashboard.html#info-and-value-boxes"><i class="fa fa-check"></i><b>2.3.2</b> Info and Value Boxes</a></li>
<li class="chapter" data-level="2.3.3" data-path="shinydashboard.html"><a href="shinydashboard.html#tab-boxes"><i class="fa fa-check"></i><b>2.3.3</b> Tab Boxes</a></li>
<li class="chapter" data-level="2.3.4" data-path="shinydashboard.html"><a href="shinydashboard.html#row-layout"><i class="fa fa-check"></i><b>2.3.4</b> Row Layout</a></li>
<li class="chapter" data-level="2.3.5" data-path="shinydashboard.html"><a href="shinydashboard.html#column-layout"><i class="fa fa-check"></i><b>2.3.5</b> Column Layout</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="shinydashboard.html"><a href="shinydashboard.html#resources-shinydashboard"><i class="fa fa-check"></i><b>2.4</b> Further Resources</a></li>
<li class="chapter" data-level="2.5" data-path="shinydashboard.html"><a href="shinydashboard.html#your-app-sdb"><i class="fa fa-check"></i><b>2.5</b> Your App</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="shinydashboard.html"><a href="shinydashboard.html#create-an-app-from-the-basic-template"><i class="fa fa-check"></i><b>2.5.1</b> Create an app from the basic template</a></li>
<li class="chapter" data-level="2.5.2" data-path="shinydashboard.html"><a href="shinydashboard.html#customize-the-header"><i class="fa fa-check"></i><b>2.5.2</b> Customize the header</a></li>
<li class="chapter" data-level="2.5.3" data-path="shinydashboard.html"><a href="shinydashboard.html#customize-the-sidebar"><i class="fa fa-check"></i><b>2.5.3</b> Customize the sidebar</a></li>
<li class="chapter" data-level="2.5.4" data-path="shinydashboard.html"><a href="shinydashboard.html#customize-the-body"><i class="fa fa-check"></i><b>2.5.4</b> Customize the body</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="inputs.html"><a href="inputs.html"><i class="fa fa-check"></i><b>3</b> Inputs</a>
<ul>
<li class="chapter" data-level="3.1" data-path="inputs.html"><a href="inputs.html#input-functions"><i class="fa fa-check"></i><b>3.1</b> Input functions</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="inputs.html"><a href="inputs.html#textinput"><i class="fa fa-check"></i><b>3.1.1</b> textInput</a></li>
<li class="chapter" data-level="3.1.2" data-path="inputs.html"><a href="inputs.html#textareainput"><i class="fa fa-check"></i><b>3.1.2</b> textAreaInput</a></li>
<li class="chapter" data-level="3.1.3" data-path="inputs.html"><a href="inputs.html#selectinput"><i class="fa fa-check"></i><b>3.1.3</b> selectInput</a></li>
<li class="chapter" data-level="3.1.4" data-path="inputs.html"><a href="inputs.html#checkboxgroupinput"><i class="fa fa-check"></i><b>3.1.4</b> checkboxGroupInput</a></li>
<li class="chapter" data-level="3.1.5" data-path="inputs.html"><a href="inputs.html#checkboxinput"><i class="fa fa-check"></i><b>3.1.5</b> checkboxInput</a></li>
<li class="chapter" data-level="3.1.6" data-path="inputs.html"><a href="inputs.html#radiobuttons"><i class="fa fa-check"></i><b>3.1.6</b> radioButtons</a></li>
<li class="chapter" data-level="3.1.7" data-path="inputs.html"><a href="inputs.html#dateinput"><i class="fa fa-check"></i><b>3.1.7</b> dateInput</a></li>
<li class="chapter" data-level="3.1.8" data-path="inputs.html"><a href="inputs.html#fileinput"><i class="fa fa-check"></i><b>3.1.8</b> fileInput</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="inputs.html"><a href="inputs.html#setting-inputs-programatically"><i class="fa fa-check"></i><b>3.2</b> Setting inputs programatically</a></li>
<li class="chapter" data-level="3.3" data-path="inputs.html"><a href="inputs.html#resources-inputs"><i class="fa fa-check"></i><b>3.3</b> Further Reources</a></li>
<li class="chapter" data-level="3.4" data-path="inputs.html"><a href="inputs.html#exercises-inputs"><i class="fa fa-check"></i><b>3.4</b> Exercises</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="inputs.html"><a href="inputs.html#pets"><i class="fa fa-check"></i><b>3.4.1</b> Pets</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="inputs.html"><a href="inputs.html#your-app-inputs"><i class="fa fa-check"></i><b>3.5</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="outputs.html"><a href="outputs.html"><i class="fa fa-check"></i><b>4</b> Outputs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="outputs.html"><a href="outputs.html#text"><i class="fa fa-check"></i><b>4.1</b> Text</a></li>
<li class="chapter" data-level="4.2" data-path="outputs.html"><a href="outputs.html#plots"><i class="fa fa-check"></i><b>4.2</b> Plots</a></li>
<li class="chapter" data-level="4.3" data-path="outputs.html"><a href="outputs.html#images"><i class="fa fa-check"></i><b>4.3</b> Images</a></li>
<li class="chapter" data-level="4.4" data-path="outputs.html"><a href="outputs.html#tables"><i class="fa fa-check"></i><b>4.4</b> Tables</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="outputs.html"><a href="outputs.html#data-tables"><i class="fa fa-check"></i><b>4.4.1</b> Data Tables</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="outputs.html"><a href="outputs.html#dynamic-html"><i class="fa fa-check"></i><b>4.5</b> Dynamic HTML</a></li>
<li class="chapter" data-level="4.6" data-path="outputs.html"><a href="outputs.html#reosurces-outputs"><i class="fa fa-check"></i><b>4.6</b> Further Resources</a></li>
<li class="chapter" data-level="4.7" data-path="outputs.html"><a href="outputs.html#exercises-outputs"><i class="fa fa-check"></i><b>4.7</b> Exercises</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="outputs.html"><a href="outputs.html#modify-the-demo"><i class="fa fa-check"></i><b>4.7.1</b> Modify the demo</a></li>
<li class="chapter" data-level="4.7.2" data-path="outputs.html"><a href="outputs.html#pets-1"><i class="fa fa-check"></i><b>4.7.2</b> Pets</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="outputs.html"><a href="outputs.html#your-app-outputs"><i class="fa fa-check"></i><b>4.8</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reactives.html"><a href="reactives.html"><i class="fa fa-check"></i><b>5</b> Reactive functions</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reactives.html"><a href="reactives.html#render-functions"><i class="fa fa-check"></i><b>5.1</b> Render functions</a></li>
<li class="chapter" data-level="5.2" data-path="reactives.html"><a href="reactives.html#reactive-1"><i class="fa fa-check"></i><b>5.2</b> reactive()</a></li>
<li class="chapter" data-level="5.3" data-path="reactives.html"><a href="reactives.html#observeevent-1"><i class="fa fa-check"></i><b>5.3</b> observeEvent()</a></li>
<li class="chapter" data-level="5.4" data-path="reactives.html"><a href="reactives.html#reactiveval"><i class="fa fa-check"></i><b>5.4</b> reactiveVal()</a></li>
<li class="chapter" data-level="5.5" data-path="reactives.html"><a href="reactives.html#reactivevalue"><i class="fa fa-check"></i><b>5.5</b> reactiveValue()</a></li>
<li class="chapter" data-level="5.6" data-path="reactives.html"><a href="reactives.html#eventreactive"><i class="fa fa-check"></i><b>5.6</b> eventReactive()</a></li>
<li class="chapter" data-level="5.7" data-path="reactives.html"><a href="reactives.html#isolate"><i class="fa fa-check"></i><b>5.7</b> isolate()</a></li>
<li class="chapter" data-level="5.8" data-path="reactives.html"><a href="reactives.html#resources-reactive"><i class="fa fa-check"></i><b>5.8</b> Further Resources</a></li>
<li class="chapter" data-level="5.9" data-path="reactives.html"><a href="reactives.html#exercises-reactive"><i class="fa fa-check"></i><b>5.9</b> Exercises</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="reactives.html"><a href="reactives.html#render"><i class="fa fa-check"></i><b>5.9.1</b> render</a></li>
<li class="chapter" data-level="5.9.2" data-path="reactives.html"><a href="reactives.html#reactive-2"><i class="fa fa-check"></i><b>5.9.2</b> reactive</a></li>
<li class="chapter" data-level="5.9.3" data-path="reactives.html"><a href="reactives.html#observeevent-2"><i class="fa fa-check"></i><b>5.9.3</b> observeEvent</a></li>
<li class="chapter" data-level="5.9.4" data-path="reactives.html"><a href="reactives.html#reactiveval-1"><i class="fa fa-check"></i><b>5.9.4</b> reactiveVal</a></li>
<li class="chapter" data-level="5.9.5" data-path="reactives.html"><a href="reactives.html#reactivevalues"><i class="fa fa-check"></i><b>5.9.5</b> reactiveValues</a></li>
<li class="chapter" data-level="5.9.6" data-path="reactives.html"><a href="reactives.html#eventreactive-1"><i class="fa fa-check"></i><b>5.9.6</b> eventReactive</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="reactives.html"><a href="reactives.html#your-app-reactive"><i class="fa fa-check"></i><b>5.10</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>6</b> Reading and saving data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data.html"><a href="data.html#local-data"><i class="fa fa-check"></i><b>6.1</b> Local Data</a></li>
<li class="chapter" data-level="6.2" data-path="data.html"><a href="data.html#google_sheets"><i class="fa fa-check"></i><b>6.2</b> Google Sheets</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="data.html"><a href="data.html#authorisation-for-apps"><i class="fa fa-check"></i><b>6.2.1</b> Authorisation for Apps</a></li>
<li class="chapter" data-level="6.2.2" data-path="data.html"><a href="data.html#accessing-an-existing-sheet"><i class="fa fa-check"></i><b>6.2.2</b> Accessing an existing sheet</a></li>
<li class="chapter" data-level="6.2.3" data-path="data.html"><a href="data.html#make-a-new-sheet"><i class="fa fa-check"></i><b>6.2.3</b> Make a new sheet</a></li>
<li class="chapter" data-level="6.2.4" data-path="data.html"><a href="data.html#add-data"><i class="fa fa-check"></i><b>6.2.4</b> Add data</a></li>
<li class="chapter" data-level="6.2.5" data-path="data.html"><a href="data.html#appending-data"><i class="fa fa-check"></i><b>6.2.5</b> Appending data</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data.html"><a href="data.html#gs4_save"><i class="fa fa-check"></i><b>6.3</b> Saving Googlesheet data</a></li>
<li class="chapter" data-level="6.4" data-path="data.html"><a href="data.html#exercises-data"><i class="fa fa-check"></i><b>6.4</b> Exercises</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data.html"><a href="data.html#read-others-data"><i class="fa fa-check"></i><b>6.4.1</b> Read others’ data</a></li>
<li class="chapter" data-level="6.4.2" data-path="data.html"><a href="data.html#read-your-own-data"><i class="fa fa-check"></i><b>6.4.2</b> Read your own data</a></li>
<li class="chapter" data-level="6.4.3" data-path="data.html"><a href="data.html#write-data"><i class="fa fa-check"></i><b>6.4.3</b> Write data</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data.html"><a href="data.html#your-app-data"><i class="fa fa-check"></i><b>6.5</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="web.html"><a href="web.html"><i class="fa fa-check"></i><b>7</b> HTML, CSS, and JavaScript</a>
<ul>
<li class="chapter" data-level="7.1" data-path="web.html"><a href="web.html#html"><i class="fa fa-check"></i><b>7.1</b> HTML</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="web.html"><a href="web.html#html-tags"><i class="fa fa-check"></i><b>7.1.1</b> HTML Tags</a></li>
<li class="chapter" data-level="7.1.2" data-path="web.html"><a href="web.html#viewing-html"><i class="fa fa-check"></i><b>7.1.2</b> Viewing HTML</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="web.html"><a href="web.html#CSS"><i class="fa fa-check"></i><b>7.2</b> CSS</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="web.html"><a href="web.html#css-basics"><i class="fa fa-check"></i><b>7.2.1</b> CSS Basics</a></li>
<li class="chapter" data-level="7.2.2" data-path="web.html"><a href="web.html#styling-a-single-element"><i class="fa fa-check"></i><b>7.2.2</b> Styling a single element</a></li>
<li class="chapter" data-level="7.2.3" data-path="web.html"><a href="web.html#inline-css"><i class="fa fa-check"></i><b>7.2.3</b> Inline CSS</a></li>
<li class="chapter" data-level="7.2.4" data-path="web.html"><a href="web.html#external-css"><i class="fa fa-check"></i><b>7.2.4</b> External CSS</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="web.html"><a href="web.html#JavaScript"><i class="fa fa-check"></i><b>7.3</b> JavaScript</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="web.html"><a href="web.html#shinyjs"><i class="fa fa-check"></i><b>7.3.1</b> shinyjs</a></li>
<li class="chapter" data-level="7.3.2" data-path="web.html"><a href="web.html#external-js"><i class="fa fa-check"></i><b>7.3.2</b> External JS</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="web.html"><a href="web.html#resources-web"><i class="fa fa-check"></i><b>7.4</b> Further Resources</a></li>
<li class="chapter" data-level="7.5" data-path="web.html"><a href="web.html#exercises-web"><i class="fa fa-check"></i><b>7.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="web.html"><a href="web.html#add-html"><i class="fa fa-check"></i><b>7.5.1</b> Add HTML</a></li>
<li class="chapter" data-level="7.5.2" data-path="web.html"><a href="web.html#class-html"><i class="fa fa-check"></i><b>7.5.2</b> Class HTML</a></li>
<li class="chapter" data-level="7.5.3" data-path="web.html"><a href="web.html#style-links"><i class="fa fa-check"></i><b>7.5.3</b> Style links</a></li>
<li class="chapter" data-level="7.5.4" data-path="web.html"><a href="web.html#style-a-single-link-directly"><i class="fa fa-check"></i><b>7.5.4</b> Style a single link directly</a></li>
<li class="chapter" data-level="7.5.5" data-path="web.html"><a href="web.html#external-css-1"><i class="fa fa-check"></i><b>7.5.5</b> External CSS</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="web.html"><a href="web.html#your-app-web"><i class="fa fa-check"></i><b>7.6</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="structure.html"><a href="structure.html"><i class="fa fa-check"></i><b>8</b> Structuring a complex app</a>
<ul>
<li class="chapter" data-level="8.1" data-path="structure.html"><a href="structure.html#external-server-functions"><i class="fa fa-check"></i><b>8.1</b> External Server Functions</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="structure.html"><a href="structure.html#sourcing-locally"><i class="fa fa-check"></i><b>8.1.1</b> Sourcing Locally</a></li>
<li class="chapter" data-level="8.1.2" data-path="structure.html"><a href="structure.html#inputs-and-outputs"><i class="fa fa-check"></i><b>8.1.2</b> Inputs and Outputs</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="structure.html"><a href="structure.html#external-ui-files"><i class="fa fa-check"></i><b>8.2</b> External UI Files</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="structure.html"><a href="structure.html#ui-lists"><i class="fa fa-check"></i><b>8.2.1</b> UI Lists</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="structure.html"><a href="structure.html#exercises-structure"><i class="fa fa-check"></i><b>8.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="structure.html"><a href="structure.html#ui-1"><i class="fa fa-check"></i><b>8.3.1</b> UI</a></li>
<li class="chapter" data-level="8.3.2" data-path="structure.html"><a href="structure.html#server"><i class="fa fa-check"></i><b>8.3.2</b> Server</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="structure.html"><a href="structure.html#your-app-structure"><i class="fa fa-check"></i><b>8.4</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>9</b> Debugging and error handling</a>
<ul>
<li class="chapter" data-level="9.1" data-path="debugging.html"><a href="debugging.html#rstudio-console-messages"><i class="fa fa-check"></i><b>9.1</b> RStudio Console Messages</a></li>
<li class="chapter" data-level="9.2" data-path="debugging.html"><a href="debugging.html#javascript-console"><i class="fa fa-check"></i><b>9.2</b> JavaScript Console</a></li>
<li class="chapter" data-level="9.3" data-path="debugging.html"><a href="debugging.html#showcase-mode"><i class="fa fa-check"></i><b>9.3</b> Showcase Mode</a></li>
<li class="chapter" data-level="9.4" data-path="debugging.html"><a href="debugging.html#trycatch"><i class="fa fa-check"></i><b>9.4</b> tryCatch</a></li>
<li class="chapter" data-level="9.5" data-path="debugging.html"><a href="debugging.html#input-checking"><i class="fa fa-check"></i><b>9.5</b> Input Checking</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="debugging.html"><a href="debugging.html#modal-dialogs"><i class="fa fa-check"></i><b>9.5.1</b> Modal Dialogs</a></li>
<li class="chapter" data-level="9.5.2" data-path="debugging.html"><a href="debugging.html#validate"><i class="fa fa-check"></i><b>9.5.2</b> Validate</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="debugging.html"><a href="debugging.html#resources-debugging"><i class="fa fa-check"></i><b>9.6</b> Further Resources</a></li>
<li class="chapter" data-level="9.7" data-path="debugging.html"><a href="debugging.html#exercises-debugging"><i class="fa fa-check"></i><b>9.7</b> Exercises</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="debugging.html"><a href="debugging.html#required-selections"><i class="fa fa-check"></i><b>9.7.1</b> Required selections</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="debugging.html"><a href="debugging.html#your-app-debugging"><i class="fa fa-check"></i><b>9.8</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="contingency.html"><a href="contingency.html"><i class="fa fa-check"></i><b>10</b> Contingent Display</a>
<ul>
<li class="chapter" data-level="10.1" data-path="contingency.html"><a href="contingency.html#hide-and-show"><i class="fa fa-check"></i><b>10.1</b> Hide and Show</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="contingency.html"><a href="contingency.html#groups"><i class="fa fa-check"></i><b>10.1.1</b> Groups</a></li>
<li class="chapter" data-level="10.1.2" data-path="contingency.html"><a href="contingency.html#toggle"><i class="fa fa-check"></i><b>10.1.2</b> Toggle</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="contingency.html"><a href="contingency.html#changing-styles"><i class="fa fa-check"></i><b>10.2</b> Changing Styles</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="contingency.html"><a href="contingency.html#changing-non-shiny-elements"><i class="fa fa-check"></i><b>10.2.1</b> Changing non-shiny elements</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="contingency.html"><a href="contingency.html#changing-input-options"><i class="fa fa-check"></i><b>10.3</b> Changing input options</a></li>
<li class="chapter" data-level="10.4" data-path="contingency.html"><a href="contingency.html#exercises-contingency"><i class="fa fa-check"></i><b>10.4</b> Exercises</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="contingency.html"><a href="contingency.html#filtered-data"><i class="fa fa-check"></i><b>10.4.1</b> Filtered data</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="contingency.html"><a href="contingency.html#your-app-contingency"><i class="fa fa-check"></i><b>10.5</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="sharing.html"><a href="sharing.html"><i class="fa fa-check"></i><b>11</b> Sharing your Apps</a>
<ul>
<li class="chapter" data-level="11.1" data-path="sharing.html"><a href="sharing.html#shinyapps.io"><i class="fa fa-check"></i><b>11.1</b> shinyapps.io</a></li>
<li class="chapter" data-level="11.2" data-path="sharing.html"><a href="sharing.html#self-hosting-a-shiny-server"><i class="fa fa-check"></i><b>11.2</b> Self-hosting a shiny server</a></li>
<li class="chapter" data-level="11.3" data-path="sharing.html"><a href="sharing.html#github"><i class="fa fa-check"></i><b>11.3</b> GitHub</a></li>
<li class="chapter" data-level="11.4" data-path="sharing.html"><a href="sharing.html#in-an-r-package"><i class="fa fa-check"></i><b>11.4</b> In an R package</a></li>
<li class="chapter" data-level="11.5" data-path="sharing.html"><a href="sharing.html#exercises-sharing"><i class="fa fa-check"></i><b>11.5</b> Exercises</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="sharing.html"><a href="sharing.html#shinyapps.io-1"><i class="fa fa-check"></i><b>11.5.1</b> Shinyapps.io</a></li>
<li class="chapter" data-level="11.5.2" data-path="sharing.html"><a href="sharing.html#github-1"><i class="fa fa-check"></i><b>11.5.2</b> GitHub</a></li>
<li class="chapter" data-level="11.5.3" data-path="sharing.html"><a href="sharing.html#r-package"><i class="fa fa-check"></i><b>11.5.3</b> R Package</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="sharing.html"><a href="sharing.html#your-app-sharing"><i class="fa fa-check"></i><b>11.6</b> Your App</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="reports.html"><a href="reports.html"><i class="fa fa-check"></i><b>12</b> Customized reports</a>
<ul>
<li class="chapter" data-level="12.1" data-path="reports.html"><a href="reports.html#download-data"><i class="fa fa-check"></i><b>12.1</b> Download Data</a></li>
<li class="chapter" data-level="12.2" data-path="reports.html"><a href="reports.html#download-images"><i class="fa fa-check"></i><b>12.2</b> Download Images</a></li>
<li class="chapter" data-level="12.3" data-path="reports.html"><a href="reports.html#r-markdown"><i class="fa fa-check"></i><b>12.3</b> R Markdown</a></li>
<li class="chapter" data-level="12.4" data-path="reports.html"><a href="reports.html#exercises-reports"><i class="fa fa-check"></i><b>12.4</b> Exercises</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="reports.html"><a href="reports.html#food-data"><i class="fa fa-check"></i><b>12.4.1</b> Food Data</a></li>
<li class="chapter" data-level="12.4.2" data-path="reports.html"><a href="reports.html#food-image"><i class="fa fa-check"></i><b>12.4.2</b> Food Image</a></li>
<li class="chapter" data-level="12.4.3" data-path="reports.html"><a href="reports.html#food-report"><i class="fa fa-check"></i><b>12.4.3</b> Food Report</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="reports.html"><a href="reports.html#your-app-reports"><i class="fa fa-check"></i><b>12.5</b> Your app</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="modules.html"><a href="modules.html"><i class="fa fa-check"></i><b>13</b> Shiny modules for repeated structures</a>
<ul>
<li class="chapter" data-level="13.1" data-path="modules.html"><a href="modules.html#modularizing-the-ui"><i class="fa fa-check"></i><b>13.1</b> Modularizing the UI</a></li>
<li class="chapter" data-level="13.2" data-path="modules.html"><a href="modules.html#modularizing-server-functions"><i class="fa fa-check"></i><b>13.2</b> Modularizing server functions</a></li>
<li class="chapter" data-level="13.3" data-path="modules.html"><a href="modules.html#exercises-modules"><i class="fa fa-check"></i><b>13.3</b> Exercises</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="modules.html"><a href="modules.html#repeat-example"><i class="fa fa-check"></i><b>13.3.1</b> Repeat Example</a></li>
<li class="chapter" data-level="13.3.2" data-path="modules.html"><a href="modules.html#new-instance"><i class="fa fa-check"></i><b>13.3.2</b> New Instance</a></li>
<li class="chapter" data-level="13.3.3" data-path="modules.html"><a href="modules.html#altering-modules"><i class="fa fa-check"></i><b>13.3.3</b> Altering modules</a></li>
<li class="chapter" data-level="13.3.4" data-path="modules.html"><a href="modules.html#new-module"><i class="fa fa-check"></i><b>13.3.4</b> New module</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="modules.html"><a href="modules.html#your-app-modules"><i class="fa fa-check"></i><b>13.4</b> Your app</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>A</b> Installing <code>R</code></a>
<ul>
<li class="chapter" data-level="A.1" data-path="installing-r.html"><a href="installing-r.html#installing-base-r"><i class="fa fa-check"></i><b>A.1</b> Installing Base R</a></li>
<li class="chapter" data-level="A.2" data-path="installing-r.html"><a href="installing-r.html#installing-rstudio"><i class="fa fa-check"></i><b>A.2</b> Installing RStudio</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="installing-r.html"><a href="installing-r.html#rstudio-settings"><i class="fa fa-check"></i><b>A.2.1</b> RStudio Settings</a></li>
<li class="chapter" data-level="A.2.2" data-path="installing-r.html"><a href="installing-r.html#installing-shinyintro-1"><i class="fa fa-check"></i><b>A.2.2</b> Installing shinyintro</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="installing-r.html"><a href="installing-r.html#installing-latex"><i class="fa fa-check"></i><b>A.3</b> Installing LaTeX</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="symbols.html"><a href="symbols.html"><i class="fa fa-check"></i><b>B</b> Symbols</a></li>
<li class="chapter" data-level="C" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i><b>C</b> Glossary</a></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>
<li><img alt="ShinyIntro hex Logo"
    src="https://debruine.github.io/shinyintro/images/shinyintro.png" style="width: 100%"/></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Building Web Apps with R Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="structure" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Structuring a complex app</h1>
<p>So far, we’ve been mostly structuring our app entirely in the <code class='path'>app.R</code> file, apart from some of the web helper files for <a class='glossary' target='_blank' title='Cascading Style Sheet: A system for controlling the visual presentation of HTML in web pages.' href='https://psyteachr.github.io/glossary/c#css'>CSS</a> and <a class='glossary' target='_blank' title='An object-oriented computer programming language commonly used to create interactive effects in web browsers.' href='https://psyteachr.github.io/glossary/j#javascript'>JavaScript</a>. However, once your apps start getting relatively complex, you might find it easier to move some of the code into external <code class='path'>.R</code> files and using <code>source()</code> to include them. There are a few things to watch out for when you do this.</p>
<div id="external-server-functions" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> External Server Functions</h2>
<p>You can define <a class='glossary' target='_blank' title='A named section of code that can be reused.' href='https://psyteachr.github.io/glossary/f#function'>functions</a> you want to use in your app at the top of the <code class='path'>app.R</code> file, but that can make that file difficult to parse pretty quickly. The basic template includes external functions with the line:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="structure.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;scripts/func.R&quot;</span>) <span class="co"># helper functions</span></span></code></pre></div>
<p>This file contains definitions for the functions <code><span class="fu">debug_msg</span>()</code> and <code><span class="fu">debug_sprintf</span>()</code>. You can add your own custom functions to this file or to another file that you source in separately.</p>
<div class="warning">
<p>All <code class='path'>.R</code> files inside a directory called <code class='path'>R</code> will run before the app starts up, even if you don’t source them into the app. You can use this to set up any functions your app needs without having to use <code><span class="fu">source</span>()</code>, but I prefer to explicitly include external files, so I keep external functions in a directory called <code>scripts</code>.</p>
</div>
<div id="sourcing-locally" class="section level3" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Sourcing Locally</h3>
<p>It can be tricky to use shiny functions to external files. For example, you can’t just move the contents of <code><span class="fu">server</span>()</code> to an external file called <code class='path'>scripts/logo.R</code> and source the file in like this:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="structure.html#cb120-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb120-2"><a href="structure.html#cb120-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">&quot;scripts/logo.R&quot;</span>)</span>
<span id="cb120-3"><a href="structure.html#cb120-3" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>You’ll get an error like: “Error in output$logo &lt;- renderImage({ : object ‘output’ not found.” This is because the input and output objects only work like you’d expect when they are inside <code><span class="fu">server</span>()</code></p>
<p>However, you can source in external code inside <code><span class="fu">server</span>()</code> by setting the <code>local</code> <a class='glossary' target='_blank' title='A variable that provides input to a function.' href='https://psyteachr.github.io/glossary/a#argument'>argument</a> to TRUE.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="structure.html#cb121-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb121-2"><a href="structure.html#cb121-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">&quot;scripts/logo.R&quot;</span>, <span class="at">local =</span> <span class="cn">TRUE</span>)</span>
<span id="cb121-3"><a href="structure.html#cb121-3" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>You might find it useful to break up parts of the server logic for a very big app into separate files like this, but it’s more common to keep any code that uses reactive functions inside <code><span class="fu">server</span>()</code> in the <code class='path'>app.R</code> file, and move large sections of code inside those functions to externally defined functions.</p>
<p>For example, you could define the function <code><span class="fu">logo_image</span>()</code> in the external file <code class='path'>scripts/logo.R</code> like this:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="structure.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">logo_image</span>() <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb122-2"><a href="structure.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">src =</span> <span class="st">&quot;www/img/shinyintro.png&quot;</span>,</span>
<span id="cb122-3"><a href="structure.html#cb122-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="st">&quot;300px&quot;</span>,</span>
<span id="cb122-4"><a href="structure.html#cb122-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="st">&quot;300px&quot;</span>,</span>
<span id="cb122-5"><a href="structure.html#cb122-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">alt =</span> <span class="st">&quot;ShinyIntro hex logo&quot;</span>)</span>
<span id="cb122-6"><a href="structure.html#cb122-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>The following in the <code class='path'>app.R</code> file keeps the reactive function <code><span class="fu">renderImage</span>()</code> inside <code><span class="fu">server</span>()</code>, but lets you reduce the number of lines of code.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="structure.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;scripts/logo.R&quot;</span>)</span>
<span id="cb123-2"><a href="structure.html#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="structure.html#cb123-3" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb123-4"><a href="structure.html#cb123-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">source</span>(<span class="st">&quot;scripts/logo.R&quot;</span>, <span class="at">local =</span> <span class="cn">TRUE</span>)</span>
<span id="cb123-5"><a href="structure.html#cb123-5" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>logo <span class="ot">&lt;-</span> <span class="fu">renderImage</span>(<span class="fu">logo_image</span>(), <span class="at">deleteFile =</span> <span class="cn">FALSE</span>)</span>
<span id="cb123-6"><a href="structure.html#cb123-6" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
</div>
<div id="inputs-and-outputs" class="section level3" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Inputs and Outputs</h3>
<p>The objects <code>input</code> and <code>output</code> aren’t available by default to externally defined functions. Let’s add an action button to the ui for our app, <code>actionButton("change", "Change Image")</code>, and change the <code><span class="fu">logo_image</span>()</code> function so that it returns the ShinyIntro logo on odd-numbered clicks of the change button, and the psyTeachR logo on even-numbered clicks.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="structure.html#cb124-1" aria-hidden="true" tabindex="-1"></a>logo_image <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb124-2"><a href="structure.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  odd_clicks <span class="ot">&lt;-</span> input<span class="sc">$</span>change<span class="sc">%%</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb124-3"><a href="structure.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  src <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(odd_clicks, </span>
<span id="cb124-4"><a href="structure.html#cb124-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;www/img/shinyintro.png&quot;</span>, </span>
<span id="cb124-5"><a href="structure.html#cb124-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;www/img/psyteachr.png&quot;</span>)</span>
<span id="cb124-6"><a href="structure.html#cb124-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb124-7"><a href="structure.html#cb124-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">src =</span> src,</span>
<span id="cb124-8"><a href="structure.html#cb124-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="st">&quot;300px&quot;</span>,</span>
<span id="cb124-9"><a href="structure.html#cb124-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="st">&quot;300px&quot;</span>,</span>
<span id="cb124-10"><a href="structure.html#cb124-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">alt =</span> <span class="st">&quot;ShinyIntro hex logo&quot;</span>)</span>
<span id="cb124-11"><a href="structure.html#cb124-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>If you try to run this, you’ll get an error message like, “Error in logo_image: object ‘input’ not found.” This is because the external function doesn’t have access to reactive objects like <code>input</code>, <code>output</code>, <code>session</code>, or any <code><span class="fu">reactiveValues</span>()</code>.</p>
<p>The best solution is to pass any variables to the function that you need. In some circumstances, you can pass the whole <code>input</code> object, but that’s seldom necessary.</p>
<p>Here, we change <code><span class="fu">logo_image</span>()</code> to take a single argument called <code><span class="at">change</span></code> and replace <code>input$change</code> with this argument.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="structure.html#cb125-1" aria-hidden="true" tabindex="-1"></a>logo_image <span class="ot">&lt;-</span> <span class="cf">function</span>(change) {</span>
<span id="cb125-2"><a href="structure.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  odd_clicks <span class="ot">&lt;-</span> change<span class="sc">%%</span><span class="dv">2</span> <span class="sc">==</span> <span class="dv">1</span></span>
<span id="cb125-3"><a href="structure.html#cb125-3" aria-hidden="true" tabindex="-1"></a>  src <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(odd_clicks, </span>
<span id="cb125-4"><a href="structure.html#cb125-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;www/img/shinyintro.png&quot;</span>, </span>
<span id="cb125-5"><a href="structure.html#cb125-5" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;www/img/psyteachr.png&quot;</span>)</span>
<span id="cb125-6"><a href="structure.html#cb125-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb125-7"><a href="structure.html#cb125-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">src =</span> src,</span>
<span id="cb125-8"><a href="structure.html#cb125-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="st">&quot;300px&quot;</span>,</span>
<span id="cb125-9"><a href="structure.html#cb125-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="st">&quot;300px&quot;</span>,</span>
<span id="cb125-10"><a href="structure.html#cb125-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">alt =</span> <span class="st">&quot;ShinyIntro hex logo&quot;</span>)</span>
<span id="cb125-11"><a href="structure.html#cb125-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Then we just have to pass the value of <code>input$change</code> to <code><span class="fu">logo_image</span>()</code> inside <code><span class="fu">renderImage</span>()</code>, where the <code>input</code> object is available.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="structure.html#cb126-1" aria-hidden="true" tabindex="-1"></a>server <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb126-2"><a href="structure.html#cb126-2" aria-hidden="true" tabindex="-1"></a>    output<span class="sc">$</span>logo <span class="ot">&lt;-</span> <span class="fu">renderImage</span>({</span>
<span id="cb126-3"><a href="structure.html#cb126-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">logo_image</span>(input<span class="sc">$</span>change)</span>
<span id="cb126-4"><a href="structure.html#cb126-4" aria-hidden="true" tabindex="-1"></a>    }, <span class="at">deleteFile =</span> <span class="cn">FALSE</span>)</span>
<span id="cb126-5"><a href="structure.html#cb126-5" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>Don’t worry too much if this isn’t making a lot of sense yet. The main thing I want you to take away from this section is that when you try to move some server code to external files, you might get errors (I frequently do). I hope that will remind you of this lesson and you’ll have a better idea about where to start looking for the solution.</p>
</div>
</div>
<div id="external-ui-files" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> External UI Files</h2>
<p>Defining a complex UI can be very challenging. The basic template uses a pattern that I find helpful with apps that have multiple tab items. I assign each tab to an object and then include the tabs of the app in <code><span class="fu">dashboardBody</span>()</code> like this:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="structure.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabItems</span>(</span>
<span id="cb127-2"><a href="structure.html#cb127-2" aria-hidden="true" tabindex="-1"></a>    intro_tab,</span>
<span id="cb127-3"><a href="structure.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    questionnaire_tab,</span>
<span id="cb127-4"><a href="structure.html#cb127-4" aria-hidden="true" tabindex="-1"></a>    feedback_tab,</span>
<span id="cb127-5"><a href="structure.html#cb127-5" aria-hidden="true" tabindex="-1"></a>    info_tab</span>
<span id="cb127-6"><a href="structure.html#cb127-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>For a simple app, you can define the tabs in <code class='path'>app.R</code> just before you define the <code>ui</code>. You can do the same for any components of the <code>ui</code>, such as <code><span class="fu">dashboardHeader</span>()</code> or <code><span class="fu">dashboardSidebar</span>()</code>. When the sections start getting complex, you can move them into external files and source them in.</p>
<div id="ui-lists" class="section level3" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> UI Lists</h3>
<p><img src="images/structure_ui.png" style="float: right; width: 100%; max-width: 420px;" /></p>
<p>When parts of the UI repeat or can be created programmatically instead of manually, you can use <code><span class="fu">apply</span>()</code> or <code><span class="fu">map</span>()</code> functions to create a list of UI components. It can be a little tricky to figure out how to add a list of components into the UI, but this can be accomplished with <code><span class="fu">do.call</span>()</code>.</p>
<p>Here’s an example of how you would programatically create select inputs for each categorical column of the <code>starwars</code> dataset from <code class='package'>dplyr</code> and add them to a <code><span class="fu">box</span>()</code>.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="structure.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the categorical columns</span></span>
<span id="cb128-2"><a href="structure.html#cb128-2" aria-hidden="true" tabindex="-1"></a>col_is_char <span class="ot">&lt;-</span> <span class="fu">sapply</span>(starwars, is.character)</span>
<span id="cb128-3"><a href="structure.html#cb128-3" aria-hidden="true" tabindex="-1"></a>categorical_cols <span class="ot">&lt;-</span> <span class="fu">names</span>(starwars)[col_is_char]</span>
<span id="cb128-4"><a href="structure.html#cb128-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-5"><a href="structure.html#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="co"># set up the selectInputs</span></span>
<span id="cb128-6"><a href="structure.html#cb128-6" aria-hidden="true" tabindex="-1"></a>select_inputs <span class="ot">&lt;-</span> <span class="fu">lapply</span>(categorical_cols, <span class="cf">function</span>(col) {</span>
<span id="cb128-7"><a href="structure.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  unique_vals <span class="ot">&lt;-</span> <span class="fu">unique</span>(starwars[[col]])</span>
<span id="cb128-8"><a href="structure.html#cb128-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb128-9"><a href="structure.html#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="at">inputId =</span> col, <span class="at">label =</span> col, <span class="at">choices =</span> unique_vals)</span>
<span id="cb128-10"><a href="structure.html#cb128-10" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb128-11"><a href="structure.html#cb128-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-12"><a href="structure.html#cb128-12" aria-hidden="true" tabindex="-1"></a><span class="co"># add container arguments to select_inputs </span></span>
<span id="cb128-13"><a href="structure.html#cb128-13" aria-hidden="true" tabindex="-1"></a>select_inputs<span class="sc">$</span>title <span class="ot">=</span> <span class="st">&quot;Select the Categories&quot;</span></span>
<span id="cb128-14"><a href="structure.html#cb128-14" aria-hidden="true" tabindex="-1"></a>select_inputs<span class="sc">$</span>solidHeader <span class="ot">=</span> <span class="cn">TRUE</span></span>
<span id="cb128-15"><a href="structure.html#cb128-15" aria-hidden="true" tabindex="-1"></a>select_inputs<span class="sc">$</span>width <span class="ot">=</span> <span class="dv">4</span></span>
<span id="cb128-16"><a href="structure.html#cb128-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-17"><a href="structure.html#cb128-17" aria-hidden="true" tabindex="-1"></a><span class="co"># add to container</span></span>
<span id="cb128-18"><a href="structure.html#cb128-18" aria-hidden="true" tabindex="-1"></a>select_box <span class="ot">&lt;-</span> <span class="fu">do.call</span>(box, select_inputs)</span></code></pre></div>
</div>
</div>
<div id="exercises-structure" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Exercises</h2>
<div id="ui-1" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> UI</h3>
<p>Clone the reactive_demo, move the boxes in the ui to an external file, and source them in.</p>
</div>
<div id="server" class="section level3" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Server</h3>
<p>Make a custom function in <code class='path'>scripts/func.R</code> that creates the plot. Use that in <code><span class="fu">server</span>()</code>.</p>
</div>
</div>
<div id="your-app-structure" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Your App</h2>
<p>In the app you’re developing, see if there are any long functions inside reactive functions in <code><span class="fu">server</span>()</code> that can be moved to <code class='path'>scripts/func.R</code> or another external file. Move each tab into an external file and source it into <code class='path'>app.R</code>.</p>

</div>
</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("webex-total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("webex-correct").length + " of " +
      document.getElementsByClassName("webex-solveme").length + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }
  
  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="web.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="debugging.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["shinyintro.pdf", "PDF"], ["shinyintro.epub", "EPUB"], ["shinyintro.mobi", "MOBI"]],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
