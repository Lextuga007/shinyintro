<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Day 4 Sharing, Download and Repeating | Building Web Apps with R Shiny</title>
  <meta name="description" content="This class will teach you the basics of Shiny app programming, giving you skills that will form the basis of almost any app you want to build. By the end of the class, you will have created a custom app that collects and saves data, allows users to dynamically visualize the data, and produces downloadable reports." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Day 4 Sharing, Download and Repeating | Building Web Apps with R Shiny" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This class will teach you the basics of Shiny app programming, giving you skills that will form the basis of almost any app you want to build. By the end of the class, you will have created a custom app that collects and saves data, allows users to dynamically visualize the data, and produces downloadable reports." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Day 4 Sharing, Download and Repeating | Building Web Apps with R Shiny" />
  
  <meta name="twitter:description" content="This class will teach you the basics of Shiny app programming, giving you skills that will form the basis of almost any app you want to build. By the end of the class, you will have created a custom app that collects and saves data, allows users to dynamically visualize the data, and produces downloadable reports." />
  

<meta name="author" content="Lisa DeBruine" />


<meta name="date" content="2021-07-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="more-complex-apps.html"/>
<link rel="next" href="installing-r.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<meta property="og:title" content="IntroDataViz">
<meta property="og:description" content="Data Visualisation Using R, For Researchers Who Don’t Use R.">
<meta property="og:image" content="https://psyteachr.github.io/images/twitter/psyteachr.png">
<meta property="og:url" content="https://psyteachr.github.io/introdataviz/">
<meta property="twitter:card" content="summary_large_image">

<link rel="shortcut icon" href="https://psyteachr.github.io/images/logo.png">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Building Web Apps with R Shiny</a></li>
<li><a href="https://zenodo.org/badge/latestdoi/166559207"><img src="https://zenodo.org/badge/166559207.svg" alt="DOI"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#example-apps"><i class="fa fa-check"></i><b>0.1</b> Example Apps</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#code-horizons-course-27-30-july-2021"><i class="fa fa-check"></i><b>0.2</b> Code Horizons Course (27-30 July 2021)</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#computing"><i class="fa fa-check"></i><b>0.3</b> Computing</a></li>
<li class="chapter" data-level="0.4" data-path="index.html"><a href="index.html#who-should-register"><i class="fa fa-check"></i><b>0.4</b> Who Should Register?</a></li>
<li class="chapter" data-level="0.5" data-path="index.html"><a href="index.html#glossary-intro"><i class="fa fa-check"></i><b>0.5</b> Glossary</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#your-first-shiny-app"><i class="fa fa-check"></i><b>1.1</b> Your First Shiny App</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="getting-started.html"><a href="getting-started.html#create-a-demo-app"><i class="fa fa-check"></i><b>1.1.1</b> Create a Demo App</a></li>
<li class="chapter" data-level="1.1.2" data-path="getting-started.html"><a href="getting-started.html#run-the-app"><i class="fa fa-check"></i><b>1.1.2</b> Run the app</a></li>
<li class="chapter" data-level="1.1.3" data-path="getting-started.html"><a href="getting-started.html#modify-the-demo-app"><i class="fa fa-check"></i><b>1.1.3</b> Modify the Demo App</a></li>
<li class="chapter" data-level="1.1.4" data-path="getting-started.html"><a href="getting-started.html#adding-new-things"><i class="fa fa-check"></i><b>1.1.4</b> Adding New Things</a></li>
<li class="chapter" data-level="1.1.5" data-path="getting-started.html"><a href="getting-started.html#overview-of-the-uiserver-structure"><i class="fa fa-check"></i><b>1.1.5</b> Overview of the UI/server structure</a></li>
<li class="chapter" data-level="1.1.6" data-path="getting-started.html"><a href="getting-started.html#inputs-outputs-and-action-buttons"><i class="fa fa-check"></i><b>1.1.6</b> Inputs, outputs, and action buttons</a></li>
<li class="chapter" data-level="1.1.7" data-path="getting-started.html"><a href="getting-started.html#reactive-functions"><i class="fa fa-check"></i><b>1.1.7</b> Reactive functions</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#shinydashboard"><i class="fa fa-check"></i><b>1.2</b> ShinyDashboard</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="getting-started.html"><a href="getting-started.html#basic-template-for-shinydashboard-projects"><i class="fa fa-check"></i><b>1.2.1</b> Basic template for shinydashboard projects</a></li>
<li class="chapter" data-level="1.2.2" data-path="getting-started.html"><a href="getting-started.html#sidebar-menu-navigation-and-tabs"><i class="fa fa-check"></i><b>1.2.2</b> Sidebar, menu navigation, and tabs</a></li>
<li class="chapter" data-level="1.2.3" data-path="getting-started.html"><a href="getting-started.html#row--and-column-based-layouts"><i class="fa fa-check"></i><b>1.2.3</b> Row- and column-based layouts</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#glossary-intro"><i class="fa fa-check"></i><b>1.3</b> Glossary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="basic-patterns.html"><a href="basic-patterns.html"><i class="fa fa-check"></i><b>2</b> Basic Patterns</a>
<ul>
<li class="chapter" data-level="2.1" data-path="basic-patterns.html"><a href="basic-patterns.html#input_functions"><i class="fa fa-check"></i><b>2.1</b> Different input types</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="basic-patterns.html"><a href="basic-patterns.html#textinput"><i class="fa fa-check"></i><b>2.1.1</b> textInput</a></li>
<li class="chapter" data-level="2.1.2" data-path="basic-patterns.html"><a href="basic-patterns.html#textareainput"><i class="fa fa-check"></i><b>2.1.2</b> textAreaInput</a></li>
<li class="chapter" data-level="2.1.3" data-path="basic-patterns.html"><a href="basic-patterns.html#selectinput"><i class="fa fa-check"></i><b>2.1.3</b> selectInput</a></li>
<li class="chapter" data-level="2.1.4" data-path="basic-patterns.html"><a href="basic-patterns.html#checkboxgroupinput"><i class="fa fa-check"></i><b>2.1.4</b> checkboxGroupInput</a></li>
<li class="chapter" data-level="2.1.5" data-path="basic-patterns.html"><a href="basic-patterns.html#checkboxinput"><i class="fa fa-check"></i><b>2.1.5</b> checkboxInput</a></li>
<li class="chapter" data-level="2.1.6" data-path="basic-patterns.html"><a href="basic-patterns.html#setting-inputs-programatically"><i class="fa fa-check"></i><b>2.1.6</b> Setting inputs programatically</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="basic-patterns.html"><a href="basic-patterns.html#output_functions"><i class="fa fa-check"></i><b>2.2</b> Different output types</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="basic-patterns.html"><a href="basic-patterns.html#textoutput"><i class="fa fa-check"></i><b>2.2.1</b> textOutput</a></li>
<li class="chapter" data-level="2.2.2" data-path="basic-patterns.html"><a href="basic-patterns.html#uioutput"><i class="fa fa-check"></i><b>2.2.2</b> uiOutput</a></li>
<li class="chapter" data-level="2.2.3" data-path="basic-patterns.html"><a href="basic-patterns.html#plotoutput"><i class="fa fa-check"></i><b>2.2.3</b> plotOutput</a></li>
<li class="chapter" data-level="2.2.4" data-path="basic-patterns.html"><a href="basic-patterns.html#imageoutput"><i class="fa fa-check"></i><b>2.2.4</b> imageOutput</a></li>
<li class="chapter" data-level="2.2.5" data-path="basic-patterns.html"><a href="basic-patterns.html#tableoutput"><i class="fa fa-check"></i><b>2.2.5</b> tableOutput</a></li>
<li class="chapter" data-level="2.2.6" data-path="basic-patterns.html"><a href="basic-patterns.html#datatableoutput"><i class="fa fa-check"></i><b>2.2.6</b> dataTableOutput</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="basic-patterns.html"><a href="basic-patterns.html#reading-and-saving-data"><i class="fa fa-check"></i><b>2.3</b> Reading and saving data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="basic-patterns.html"><a href="basic-patterns.html#local-data"><i class="fa fa-check"></i><b>2.3.1</b> Local Data</a></li>
<li class="chapter" data-level="2.3.2" data-path="basic-patterns.html"><a href="basic-patterns.html#google_sheets"><i class="fa fa-check"></i><b>2.3.2</b> Google Sheets</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="basic-patterns.html"><a href="basic-patterns.html#reactive-functions-1"><i class="fa fa-check"></i><b>2.4</b> Reactive functions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="more-complex-apps.html"><a href="more-complex-apps.html"><i class="fa fa-check"></i><b>3</b> More Complex Apps</a>
<ul>
<li class="chapter" data-level="3.1" data-path="more-complex-apps.html"><a href="more-complex-apps.html#customizing-your-apps"><i class="fa fa-check"></i><b>3.1</b> Customizing Your Apps</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="more-complex-apps.html"><a href="more-complex-apps.html#css-html-and-javascript"><i class="fa fa-check"></i><b>3.1.1</b> CSS, HTML, and Javascript</a></li>
<li class="chapter" data-level="3.1.2" data-path="more-complex-apps.html"><a href="more-complex-apps.html#structuring-a-complex-app"><i class="fa fa-check"></i><b>3.1.2</b> Structuring a complex app</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="more-complex-apps.html"><a href="more-complex-apps.html#intermediate-patterns"><i class="fa fa-check"></i><b>3.2</b> Intermediate Patterns</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="more-complex-apps.html"><a href="more-complex-apps.html#debugging-and-error-handling"><i class="fa fa-check"></i><b>3.2.1</b> Debugging and error handling</a></li>
<li class="chapter" data-level="3.2.2" data-path="more-complex-apps.html"><a href="more-complex-apps.html#displaying-elements-contingent-on-the-state-of-other-elements"><i class="fa fa-check"></i><b>3.2.2</b> Displaying elements contingent on the state of other elements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html"><i class="fa fa-check"></i><b>4</b> Sharing, Download and Repeating</a>
<ul>
<li class="chapter" data-level="4.1" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#sharing-your-apps"><i class="fa fa-check"></i><b>4.1</b> Sharing your Apps</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#shinyapps.io"><i class="fa fa-check"></i><b>4.1.1</b> shinyapps.io</a></li>
<li class="chapter" data-level="4.1.2" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#self-hosting-a-shiny-server"><i class="fa fa-check"></i><b>4.1.2</b> Self-hosting a shiny server</a></li>
<li class="chapter" data-level="4.1.3" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#github"><i class="fa fa-check"></i><b>4.1.3</b> GitHub</a></li>
<li class="chapter" data-level="4.1.4" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#in-an-r-package"><i class="fa fa-check"></i><b>4.1.4</b> In an R package</a></li>
<li class="chapter" data-level="4.1.5" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#exercises"><i class="fa fa-check"></i><b>4.1.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#creating-and-downloading-a-customized-report"><i class="fa fa-check"></i><b>4.2</b> Creating and downloading a customized report</a></li>
<li class="chapter" data-level="4.3" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#shiny-modules-for-repeated-structures"><i class="fa fa-check"></i><b>4.3</b> Shiny modules for repeated structures</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#modularizing-the-ui"><i class="fa fa-check"></i><b>4.3.1</b> Modularizing the UI</a></li>
<li class="chapter" data-level="4.3.2" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#modularizing-server-functions"><i class="fa fa-check"></i><b>4.3.2</b> Modularizing server functions</a></li>
<li class="chapter" data-level="4.3.3" data-path="sharing-download-and-repeating.html"><a href="sharing-download-and-repeating.html#exercises-1"><i class="fa fa-check"></i><b>4.3.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="installing-r.html"><a href="installing-r.html"><i class="fa fa-check"></i><b>A</b> Installing <code>R</code></a>
<ul>
<li class="chapter" data-level="A.1" data-path="installing-r.html"><a href="installing-r.html#installing-base-r"><i class="fa fa-check"></i><b>A.1</b> Installing Base R</a></li>
<li class="chapter" data-level="A.2" data-path="installing-r.html"><a href="installing-r.html#installing-rstudio"><i class="fa fa-check"></i><b>A.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="A.3" data-path="installing-r.html"><a href="installing-r.html#installing-latex"><i class="fa fa-check"></i><b>A.3</b> Installing LaTeX</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="setup-git.html"><a href="setup-git.html"><i class="fa fa-check"></i><b>B</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="B.1" data-path="setup-git.html"><a href="setup-git.html#get-a-github-account"><i class="fa fa-check"></i><b>B.1</b> Get a GitHub account</a></li>
<li class="chapter" data-level="B.2" data-path="setup-git.html"><a href="setup-git.html#set-up-rstudio"><i class="fa fa-check"></i><b>B.2</b> Set up RStudio</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="setup-git.html"><a href="setup-git.html#install-git"><i class="fa fa-check"></i><b>B.2.1</b> Install git</a></li>
<li class="chapter" data-level="B.2.2" data-path="setup-git.html"><a href="setup-git.html#enable-version-control-in-rstudio"><i class="fa fa-check"></i><b>B.2.2</b> Enable version control in RStudio</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="setup-git.html"><a href="setup-git.html#github-info"><i class="fa fa-check"></i><b>B.3</b> Set your GitHub info</a></li>
<li class="chapter" data-level="B.4" data-path="setup-git.html"><a href="setup-git.html#create-an-ssh-key-on-rstudio"><i class="fa fa-check"></i><b>B.4</b> Create an SSH Key on RStudio</a></li>
<li class="chapter" data-level="B.5" data-path="setup-git.html"><a href="setup-git.html#create-an-ssh-key-on-github"><i class="fa fa-check"></i><b>B.5</b> Create an SSH Key on GitHub</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="symbols.html"><a href="symbols.html"><i class="fa fa-check"></i><b>C</b> Symbols</a></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>
<li><a href="https://psyteachr.github.io/books" target="blank">PsyTeachR Books</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Building Web Apps with R Shiny</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sharing-download-and-repeating" class="section level1" number="4">
<h1><span class="header-section-number">Day 4</span> Sharing, Download and Repeating</h1>
<p>Welcome to Day 4! Today we’ll learn one of the most important aspects of Shiny coding: how to share your apps with other people.</p>
<p>In the second half of Day 4, we’ll learn how to create customized reports to show your users in the Shiny app and how to download them. We’ll also learn about modules, which can help you avoid repeating chunks of very similar code.</p>
<div id="sharing-your-apps" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Sharing your Apps</h2>
<div id="shinyapps.io" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> shinyapps.io</h3>
<p><img src="images/saio_connect.png" style="max-width:300px; float: right;" /></p>
<ol style="list-style-type: decimal">
<li>Open <strong><code>Tools &gt; Global Options ...</code></strong></li>
<li>Go to the <strong>Publishing</strong> tab</li>
<li>Click the <strong>Connect</strong> button and choose ShinyApps.io</li>
<li>Click on the link to <a href="https://www.shinyapps.io/" target="_blank">go to your account</a></li>
<li>Click the <strong>Sign Up</strong> button and <strong>Sign up with GitHub</strong></li>
<li>You should now be in your shinyapps.io dashboard; click on your name in the upper right and choose <strong>Tokens</strong></li>
<li>Add a token</li>
<li>Click <strong>Show</strong> next to the token and copy the text to the clipboard
<img src="images/saio_secret.png" /></li>
<li>Go back to RStudio and paste the text in the box and click <strong>Connect Account</strong></li>
<li>Make sure the box next to “Enable publishing…” is ticked, click <strong>Apply</strong>, and close the options window
˙
You can test this by creating a simple app. If you have the shinyintro package, use the code below.</li>
</ol>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="sharing-download-and-repeating.html#cb46-1" aria-hidden="true" tabindex="-1"></a>shinyintro<span class="sc">::</span><span class="fu">newapp</span>(<span class="st">&quot;mytestapp&quot;</span>, <span class="st">&quot;input_demo&quot;</span>)</span></code></pre></div>
<p><img src="images/saio_publish.png" style="max-width:300px; float: right;" /></p>
<p>Open the app.R file and go to <strong><code>File &gt; Publish...</code></strong> in the menu (or click on the blue icon in the upper right corner of the source pane). Make sure these are the right files for your app, edit the title if you want, and click <strong>Publish</strong>. A web browser window will open after a few seconds showing your app online! You can now share it with your friends and colleagues.</p>
<div class="info">
<p>
If publishing fails, check the Console pane. If you already have too many apps on shinyapps.io, you’ll see the message, “You have reached the maximum number of applications allowed for your account.” You can archive some of your apps from the shinyapps.io dashboard if this is the problem.
</p>
</div>
</div>
<div id="self-hosting-a-shiny-server" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Self-hosting a shiny server</h3>
<p>Setting up a shiny server is beyond the scope of this class, but if you have access to one, you can ask the administrator how to access the correct directories and upload your app directories there.</p>
<p>This solution is good if you want to save data locally and do not want to use Google Sheets. You can’t save data locally on shinyapps.io.</p>
<div class="info">
<p>
If you save data locally on a shiny server, you may need to change the owner or permissions of the directory you save data in so that the web user can write to it. Ask the administrator of the server for help if this doesn’t make any sense to you.
</p>
</div>
</div>
<div id="github" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> GitHub</h3>
<p>GitHub is a great place to organise and share your code using <a class='glossary' target='_blank' title='A way to save a record of changes to your files.' href='https://psyteachr.github.io/glossary/v#version-control'>version control</a>. You can also use it to host Shiny app code for others to download and run on their own computer with RStudio.</p>
<p>See <a href="setup-git.html#setup-git">Appendix B</a> for instructions on how to set up git and a GitHub account.</p>
</div>
<div id="in-an-r-package" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> In an R package</h3>
</div>
<div id="exercises" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Exercises</h3>
<div id="shinyapps.io-1" class="section level4" number="4.1.5.1">
<h4><span class="header-section-number">4.1.5.1</span> 1. Shinyapps.io</h4>
<ul>
<li>Upload another demo app to shinyapps.io.</li>
<li>Check that you can access it online.</li>
<li>Archive the app in the shinyapps.io dashboard.</li>
</ul>
</div>
</div>
</div>
<div id="creating-and-downloading-a-customized-report" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Creating and downloading a customized report</h2>
</div>
<div id="shiny-modules-for-repeated-structures" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Shiny modules for repeated structures</h2>
<p>If you find yourself making nearly identical UIs or functions over and over in the same app, you might benefit from modules. This is a way to</p>
<p>You can run this app locally with <code>shinyintro::app("modules_demo")</code> or view it in a separate tab with the [showcase interface](&lt;<a href="https://shiny.psy.gla.ac.uk/debruine/modules_demo/" class="uri">https://shiny.psy.gla.ac.uk/debruine/modules_demo/</a>({target="_blank"}.</p>
<div class="figure" style="text-align: center"><span id="fig:modules-demo-app"></span>
<iframe src="https://shiny.psy.gla.ac.uk/debruine/modules_demo/?showcase=0" width="100%" height="800px">
</iframe>
<p class="caption">
Figure 4.1: Modules Demo App
</p>
</div>
<div id="modularizing-the-ui" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Modularizing the UI</h3>
<p>The two tabPanels below follow nearly identical patterns. You can often identify a place where modules might be useful when you use a naming convention like {base}_{type} for the ids.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="sharing-download-and-repeating.html#cb47-1" aria-hidden="true" tabindex="-1"></a>iris_tab <span class="ot">&lt;-</span> <span class="fu">tabPanel</span>(</span>
<span id="cb47-2"><a href="sharing-download-and-repeating.html#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;iris&quot;</span>,</span>
<span id="cb47-3"><a href="sharing-download-and-repeating.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;iris_dv&quot;</span>, <span class="st">&quot;DV&quot;</span>, <span class="at">choices =</span> <span class="fu">names</span>(iris)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]),</span>
<span id="cb47-4"><a href="sharing-download-and-repeating.html#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="st">&quot;iris_plot&quot;</span>),</span>
<span id="cb47-5"><a href="sharing-download-and-repeating.html#cb47-5" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;iris_table&quot;</span>)</span>
<span id="cb47-6"><a href="sharing-download-and-repeating.html#cb47-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb47-7"><a href="sharing-download-and-repeating.html#cb47-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-8"><a href="sharing-download-and-repeating.html#cb47-8" aria-hidden="true" tabindex="-1"></a>mtcars_tab <span class="ot">&lt;-</span> <span class="fu">tabPanel</span>(</span>
<span id="cb47-9"><a href="sharing-download-and-repeating.html#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;mtcars&quot;</span>,</span>
<span id="cb47-10"><a href="sharing-download-and-repeating.html#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">selectInput</span>(<span class="st">&quot;mtcars_dv&quot;</span>, <span class="st">&quot;DV&quot;</span>, <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;disp&quot;</span>, <span class="st">&quot;hp&quot;</span>, <span class="st">&quot;drat&quot;</span>)),</span>
<span id="cb47-11"><a href="sharing-download-and-repeating.html#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plotOutput</span>(<span class="st">&quot;mtcars_plot&quot;</span>),</span>
<span id="cb47-12"><a href="sharing-download-and-repeating.html#cb47-12" aria-hidden="true" tabindex="-1"></a>  DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="st">&quot;mtcars_table&quot;</span>)</span>
<span id="cb47-13"><a href="sharing-download-and-repeating.html#cb47-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The first step in modularising your code is to make a function that creates the UIs above from the base ID and any other changing aspects. In the example above, the choices are different for each selectInput, so we’ll make a function that has the arguments <code>id</code> and <code>choices</code>.</p>
<p>The first line of a UI module function is always <code>ns &lt;- NS(id)</code>, which creates a shorthand way to add the base id to the id type. So instead of the selectInput’s name being “iris_dv” or “mtcars_dv,” we set it as <code>ns("dv")</code>. All ids need to use this <code>ns()</code> function.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="sharing-download-and-repeating.html#cb48-1" aria-hidden="true" tabindex="-1"></a>tabPanelUI <span class="ot">&lt;-</span> <span class="cf">function</span>(id, choices) {</span>
<span id="cb48-2"><a href="sharing-download-and-repeating.html#cb48-2" aria-hidden="true" tabindex="-1"></a>    ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb48-3"><a href="sharing-download-and-repeating.html#cb48-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb48-4"><a href="sharing-download-and-repeating.html#cb48-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tabPanel</span>(</span>
<span id="cb48-5"><a href="sharing-download-and-repeating.html#cb48-5" aria-hidden="true" tabindex="-1"></a>        id,</span>
<span id="cb48-6"><a href="sharing-download-and-repeating.html#cb48-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">selectInput</span>(<span class="fu">ns</span>(<span class="st">&quot;dv&quot;</span>), <span class="st">&quot;DV&quot;</span>, <span class="at">choices =</span> choices),</span>
<span id="cb48-7"><a href="sharing-download-and-repeating.html#cb48-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">plotOutput</span>(<span class="fu">ns</span>(<span class="st">&quot;plot&quot;</span>)),</span>
<span id="cb48-8"><a href="sharing-download-and-repeating.html#cb48-8" aria-hidden="true" tabindex="-1"></a>        DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="fu">ns</span>(<span class="st">&quot;table&quot;</span>))</span>
<span id="cb48-9"><a href="sharing-download-and-repeating.html#cb48-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb48-10"><a href="sharing-download-and-repeating.html#cb48-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now, you can replace two tabPanel definitions with just the following code.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="sharing-download-and-repeating.html#cb49-1" aria-hidden="true" tabindex="-1"></a>iris_tab <span class="ot">&lt;-</span> <span class="fu">tabPanelUI</span>(<span class="st">&quot;iris&quot;</span>, <span class="fu">names</span>(iris)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb49-2"><a href="sharing-download-and-repeating.html#cb49-2" aria-hidden="true" tabindex="-1"></a>mtcars_tab <span class="ot">&lt;-</span> <span class="fu">tabPanelUI</span>(<span class="st">&quot;mtcars&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;mpg&quot;</span>, <span class="st">&quot;disp&quot;</span>, <span class="st">&quot;hp&quot;</span>, <span class="st">&quot;drat&quot;</span>))</span></code></pre></div>
</div>
<div id="modularizing-server-functions" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> Modularizing server functions</h3>
<p>In our original code, we have four functions that create the two output tables and two output plots, but these are also largely redundant.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="sharing-download-and-repeating.html#cb50-1" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>iris_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb50-2"><a href="sharing-download-and-repeating.html#cb50-2" aria-hidden="true" tabindex="-1"></a>    iris</span>
<span id="cb50-3"><a href="sharing-download-and-repeating.html#cb50-3" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb50-4"><a href="sharing-download-and-repeating.html#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="sharing-download-and-repeating.html#cb50-5" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>iris_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb50-6"><a href="sharing-download-and-repeating.html#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Species, </span>
<span id="cb50-7"><a href="sharing-download-and-repeating.html#cb50-7" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> .data[[input<span class="sc">$</span>iris_dv]],</span>
<span id="cb50-8"><a href="sharing-download-and-repeating.html#cb50-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> Species)) <span class="sc">+</span></span>
<span id="cb50-9"><a href="sharing-download-and-repeating.html#cb50-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb50-10"><a href="sharing-download-and-repeating.html#cb50-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_fill_viridis_d</span>()</span>
<span id="cb50-11"><a href="sharing-download-and-repeating.html#cb50-11" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb50-12"><a href="sharing-download-and-repeating.html#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="sharing-download-and-repeating.html#cb50-13" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>mtcars_table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb50-14"><a href="sharing-download-and-repeating.html#cb50-14" aria-hidden="true" tabindex="-1"></a>    mtcars</span>
<span id="cb50-15"><a href="sharing-download-and-repeating.html#cb50-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb50-16"><a href="sharing-download-and-repeating.html#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="sharing-download-and-repeating.html#cb50-17" aria-hidden="true" tabindex="-1"></a>output<span class="sc">$</span>mtcars_plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb50-18"><a href="sharing-download-and-repeating.html#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="co"># handle non-string grouping</span></span>
<span id="cb50-19"><a href="sharing-download-and-repeating.html#cb50-19" aria-hidden="true" tabindex="-1"></a>    mtcars<span class="sc">$</span>vs <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>vs)</span>
<span id="cb50-20"><a href="sharing-download-and-repeating.html#cb50-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> vs, </span>
<span id="cb50-21"><a href="sharing-download-and-repeating.html#cb50-21" aria-hidden="true" tabindex="-1"></a>                     <span class="at">y =</span> .data[[input<span class="sc">$</span>mtcars_dv]],</span>
<span id="cb50-22"><a href="sharing-download-and-repeating.html#cb50-22" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fill =</span> vs)) <span class="sc">+</span></span>
<span id="cb50-23"><a href="sharing-download-and-repeating.html#cb50-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb50-24"><a href="sharing-download-and-repeating.html#cb50-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_fill_viridis_d</span>()</span>
<span id="cb50-25"><a href="sharing-download-and-repeating.html#cb50-25" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>The second step to modularising code is creating a server function. You can put all the functions the relate to the inputs and outputs in the UI function here, so we will include one to make the output table and one to make the output plot.</p>
<p>The server function takes the base id as the first argument, and then any arguments you need to specify things that change between base implementations. Above, the tables show different data and the plots use different groupings for the x axis and fill, so we’ll add arguments for <code>data</code> and <code>group_by</code>.</p>
<p>A server function <strong>always</strong> contains a <code>moduleServer()</code> function set up like below.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="sharing-download-and-repeating.html#cb51-1" aria-hidden="true" tabindex="-1"></a>tabPanelServer <span class="ot">&lt;-</span> <span class="cf">function</span>(id, data, group_by) {</span>
<span id="cb51-2"><a href="sharing-download-and-repeating.html#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb51-3"><a href="sharing-download-and-repeating.html#cb51-3" aria-hidden="true" tabindex="-1"></a>      <span class="co"># code ...</span></span>
<span id="cb51-4"><a href="sharing-download-and-repeating.html#cb51-4" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb51-5"><a href="sharing-download-and-repeating.html#cb51-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>No you can copy in one set of server functions above, remove the base name (e.g., “iris_” or “mtcars_”) from and inputs or outputs, and replace specific instances of the data or grouping columns with <code>data</code> and <code>group_by</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="sharing-download-and-repeating.html#cb52-1" aria-hidden="true" tabindex="-1"></a>tabPanelServer <span class="ot">&lt;-</span> <span class="cf">function</span>(id, data, group_by) {</span>
<span id="cb52-2"><a href="sharing-download-and-repeating.html#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb52-3"><a href="sharing-download-and-repeating.html#cb52-3" aria-hidden="true" tabindex="-1"></a>        output<span class="sc">$</span>table <span class="ot">&lt;-</span> DT<span class="sc">::</span><span class="fu">renderDataTable</span>({</span>
<span id="cb52-4"><a href="sharing-download-and-repeating.html#cb52-4" aria-hidden="true" tabindex="-1"></a>            data</span>
<span id="cb52-5"><a href="sharing-download-and-repeating.html#cb52-5" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb52-6"><a href="sharing-download-and-repeating.html#cb52-6" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb52-7"><a href="sharing-download-and-repeating.html#cb52-7" aria-hidden="true" tabindex="-1"></a>        output<span class="sc">$</span>plot <span class="ot">&lt;-</span> <span class="fu">renderPlot</span>({</span>
<span id="cb52-8"><a href="sharing-download-and-repeating.html#cb52-8" aria-hidden="true" tabindex="-1"></a>            <span class="co"># handle non-string groupings</span></span>
<span id="cb52-9"><a href="sharing-download-and-repeating.html#cb52-9" aria-hidden="true" tabindex="-1"></a>            data[[group_by]] <span class="ot">&lt;-</span> <span class="fu">factor</span>(data[[group_by]])</span>
<span id="cb52-10"><a href="sharing-download-and-repeating.html#cb52-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> .data[[group_by]], </span>
<span id="cb52-11"><a href="sharing-download-and-repeating.html#cb52-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">y =</span> .data[[input<span class="sc">$</span>dv]],</span>
<span id="cb52-12"><a href="sharing-download-and-repeating.html#cb52-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">fill =</span> .data[[group_by]])) <span class="sc">+</span></span>
<span id="cb52-13"><a href="sharing-download-and-repeating.html#cb52-13" aria-hidden="true" tabindex="-1"></a>                <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb52-14"><a href="sharing-download-and-repeating.html#cb52-14" aria-hidden="true" tabindex="-1"></a>                <span class="fu">scale_fill_viridis_d</span>()</span>
<span id="cb52-15"><a href="sharing-download-and-repeating.html#cb52-15" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb52-16"><a href="sharing-download-and-repeating.html#cb52-16" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb52-17"><a href="sharing-download-and-repeating.html#cb52-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="warning">
<p>
In the original code, the grouping variables were unquoted, but it’s tricky to pass unquoted variable names to custom functions, and we already know how to refer to columns by a character object using <code>.data[[char_obj]]</code>.
</p>
<p>
The grouping column <code>Species</code> in <code>iris</code> is already a factor, but recasting it as a factor won’t hurt, and is required for the <code>mtcars</code> grouping column <code>vs</code>.
</p>
</div>
<p>Now, you can replace the four functions inside the server function with these two lines of code.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="sharing-download-and-repeating.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabPanelServer</span>(<span class="st">&quot;iris&quot;</span>, <span class="at">data =</span> iris, <span class="at">group_by =</span> <span class="st">&quot;Species&quot;</span>)</span>
<span id="cb53-2"><a href="sharing-download-and-repeating.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tabPanelServer</span>(<span class="st">&quot;mtcars&quot;</span>, <span class="at">data =</span> mtcars, <span class="at">group_by =</span> <span class="st">&quot;vs&quot;</span>)</span></code></pre></div>
<p>Our example only reduced our code by 4 lines, but it can save a lot of time, effort, and debugging on projects with many similar modules. For example, if you want to change the plots in your app to use a different geom, now you only have to change one function instead of two.</p>
</div>
<div id="exercises-1" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> Exercises</h3>
<div id="repeat-example" class="section level4" number="4.3.3.1">
<h4><span class="header-section-number">4.3.3.1</span> 1. Repeat Example</h4>
<p>Try to implement the code above on your own.</p>
<ul>
<li>Create a copy of the “no_modules_demo”
<code>shinyintro::newapp("my_no_modules", "no_modules_demo")</code></li>
<li>Run the app and see how it works</li>
<li>Create the UI module function and use it to replace <code>iris_tab</code> and <code>mtcars_tab</code></li>
<li>Create the server function and use it to replace the server functions</li>
</ul>
</div>
<div id="new-instance" class="section level4" number="4.3.3.2">
<h4><span class="header-section-number">4.3.3.2</span> 2. New Instance</h4>
<p>Add a new tab called “diamonds” that visualises the <code>diamonds</code> dataset. Choose the columns you want as choices in the <code>selectInput()</code> and the grouping column.</p>
<div class="webex-solution">
<button>
UI Solution
</button>
<p>You can choose any of the numeric columns for the choices.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="sharing-download-and-repeating.html#cb54-1" aria-hidden="true" tabindex="-1"></a>diamonds_tab <span class="ot">&lt;-</span> <span class="fu">tabPanelUI</span>(<span class="st">&quot;diamonds&quot;</span>, <span class="fu">c</span>(<span class="st">&quot;carat&quot;</span>, <span class="st">&quot;depth&quot;</span>, <span class="st">&quot;table&quot;</span>, <span class="st">&quot;price&quot;</span>))</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Server Solution
</button>
<p>You can group by any of the categorical columns: cut, color, or clarity.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="sharing-download-and-repeating.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tabPanelServer</span>(<span class="st">&quot;diamonds&quot;</span>, <span class="at">data =</span> diamonds, <span class="at">group_by =</span> <span class="st">&quot;cut&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="altering-modules" class="section level4" number="4.3.3.3">
<h4><span class="header-section-number">4.3.3.3</span> 3. Altering modules</h4>
<ul>
<li>Add another <code>selectInput()</code> to the UI that allows the user to select the grouping variable. (<code>iris</code> only has one possibility, but <code>mtcars</code> and <code>diamonds</code> should have several)</li>
</ul>
<div class="webex-solution">
<button>
UI Solution
</button>
<p>You need to add a new selectInput() to the tabPanel. Remember to use the <code>ns()</code> function for the id. The choices for this select will also differ by data set, so you need to add <code>group_choices</code> to the arguments of this function.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="sharing-download-and-repeating.html#cb56-1" aria-hidden="true" tabindex="-1"></a>tabPanelUI <span class="ot">&lt;-</span> <span class="cf">function</span>(id, choices, group_choices) {</span>
<span id="cb56-2"><a href="sharing-download-and-repeating.html#cb56-2" aria-hidden="true" tabindex="-1"></a>   ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb56-3"><a href="sharing-download-and-repeating.html#cb56-3" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb56-4"><a href="sharing-download-and-repeating.html#cb56-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">tabPanel</span>(</span>
<span id="cb56-5"><a href="sharing-download-and-repeating.html#cb56-5" aria-hidden="true" tabindex="-1"></a>       id,</span>
<span id="cb56-6"><a href="sharing-download-and-repeating.html#cb56-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">selectInput</span>(<span class="fu">ns</span>(<span class="st">&quot;dv&quot;</span>), <span class="st">&quot;DV&quot;</span>, <span class="at">choices =</span> choices),</span>
<span id="cb56-7"><a href="sharing-download-and-repeating.html#cb56-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">selectInput</span>(<span class="fu">ns</span>(<span class="st">&quot;group_by&quot;</span>), <span class="st">&quot;Group By&quot;</span>, <span class="at">choices =</span> group_choices),</span>
<span id="cb56-8"><a href="sharing-download-and-repeating.html#cb56-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">plotOutput</span>(<span class="fu">ns</span>(<span class="st">&quot;plot&quot;</span>)),</span>
<span id="cb56-9"><a href="sharing-download-and-repeating.html#cb56-9" aria-hidden="true" tabindex="-1"></a>       DT<span class="sc">::</span><span class="fu">dataTableOutput</span>(<span class="fu">ns</span>(<span class="st">&quot;table&quot;</span>))</span>
<span id="cb56-10"><a href="sharing-download-and-repeating.html#cb56-10" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb56-11"><a href="sharing-download-and-repeating.html#cb56-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<ul>
<li>Update the plot function to use the value of this new input instead of “Species,” “vs,” and whatever you chose for <code>diamonds</code>.</li>
</ul>
<div class="webex-solution">
<button>
Server Solution
</button>
<p>You no longer need <code>group_by</code> in the arguments for this function because you are getting that info from an input.</p>
<p>Instead of changing <code>group_by</code> to <code>input$group_by</code> in three places in the code below, I just added the line <code>group_by &lt;- input$group_by</code> at the top of the <code>moduleServer()</code> function.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="sharing-download-and-repeating.html#cb57-1" aria-hidden="true" tabindex="-1"></a>tabPanelServer <span class="ot">&lt;-</span> <span class="cf">function</span>(id, data) {</span>
<span id="cb57-2"><a href="sharing-download-and-repeating.html#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb57-3"><a href="sharing-download-and-repeating.html#cb57-3" aria-hidden="true" tabindex="-1"></a>        group_by <span class="ot">&lt;-</span> input<span class="sc">$</span>group_by</span>
<span id="cb57-4"><a href="sharing-download-and-repeating.html#cb57-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb57-5"><a href="sharing-download-and-repeating.html#cb57-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># rest of the code is the same ...</span></span>
<span id="cb57-6"><a href="sharing-download-and-repeating.html#cb57-6" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb57-7"><a href="sharing-download-and-repeating.html#cb57-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
</div>
<div id="new-module" class="section level4" number="4.3.3.4">
<h4><span class="header-section-number">4.3.3.4</span> 4. New module</h4>
<p>There is a fluidRow() before the tabsetPanel() in the ui that contains three <code>infoBoxOutput()</code> and three renderInfoBoxOutput() functions in the server function.</p>
<p>Modularise the info boxes and their associated server functions.</p>
<div class="webex-solution">
<button>
UI Function
</button>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="sharing-download-and-repeating.html#cb58-1" aria-hidden="true" tabindex="-1"></a>infoBoxUI <span class="ot">&lt;-</span> <span class="cf">function</span>(id, <span class="at">width =</span> <span class="dv">4</span>) {</span>
<span id="cb58-2"><a href="sharing-download-and-repeating.html#cb58-2" aria-hidden="true" tabindex="-1"></a>    ns <span class="ot">&lt;-</span> <span class="fu">NS</span>(id)</span>
<span id="cb58-3"><a href="sharing-download-and-repeating.html#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="sharing-download-and-repeating.html#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">infoBoxOutput</span>(<span class="fu">ns</span>(<span class="st">&quot;box&quot;</span>), width)</span>
<span id="cb58-5"><a href="sharing-download-and-repeating.html#cb58-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Server Function
</button>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="sharing-download-and-repeating.html#cb59-1" aria-hidden="true" tabindex="-1"></a>infoBoxServer <span class="ot">&lt;-</span> <span class="cf">function</span>(id, title, fmt, icon, <span class="at">color =</span> <span class="st">&quot;purple&quot;</span>) {</span>
<span id="cb59-2"><a href="sharing-download-and-repeating.html#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">moduleServer</span>(id, <span class="cf">function</span>(input, output, session) {</span>
<span id="cb59-3"><a href="sharing-download-and-repeating.html#cb59-3" aria-hidden="true" tabindex="-1"></a>        output<span class="sc">$</span>box <span class="ot">&lt;-</span> <span class="fu">renderInfoBox</span>({</span>
<span id="cb59-4"><a href="sharing-download-and-repeating.html#cb59-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">infoBox</span>(<span class="at">title =</span> title,</span>
<span id="cb59-5"><a href="sharing-download-and-repeating.html#cb59-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">value =</span> <span class="fu">format</span>(<span class="fu">Sys.Date</span>(), fmt),</span>
<span id="cb59-6"><a href="sharing-download-and-repeating.html#cb59-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">icon =</span> <span class="fu">icon</span>(icon),</span>
<span id="cb59-7"><a href="sharing-download-and-repeating.html#cb59-7" aria-hidden="true" tabindex="-1"></a>                    <span class="at">color =</span> color)</span>
<span id="cb59-8"><a href="sharing-download-and-repeating.html#cb59-8" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb59-9"><a href="sharing-download-and-repeating.html#cb59-9" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb59-10"><a href="sharing-download-and-repeating.html#cb59-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
UI Code
</button>
<p>In the <code>ui</code>, replace the <code>fluidRow()</code> with this:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="sharing-download-and-repeating.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fluidRow</span>(</span>
<span id="cb60-2"><a href="sharing-download-and-repeating.html#cb60-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">infoBoxUI</span>(<span class="st">&quot;day&quot;</span>),</span>
<span id="cb60-3"><a href="sharing-download-and-repeating.html#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">infoBoxUI</span>(<span class="st">&quot;month&quot;</span>),</span>
<span id="cb60-4"><a href="sharing-download-and-repeating.html#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">infoBoxUI</span>(<span class="st">&quot;year&quot;</span>)</span>
<span id="cb60-5"><a href="sharing-download-and-repeating.html#cb60-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Server Code
</button>
<p>In the <code>server()</code> function, replace the <code>renderInfoBox()</code> functions with this:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="sharing-download-and-repeating.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">infoBoxServer</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;%Y&quot;</span>, <span class="st">&quot;calendar&quot;</span>)</span>
<span id="cb61-2"><a href="sharing-download-and-repeating.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">infoBoxServer</span>(<span class="st">&quot;month&quot;</span>, <span class="st">&quot;Month&quot;</span>, <span class="st">&quot;%m&quot;</span>, <span class="st">&quot;calendar-alt&quot;</span>)</span>
<span id="cb61-3"><a href="sharing-download-and-repeating.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">infoBoxServer</span>(<span class="st">&quot;day&quot;</span>, <span class="st">&quot;Day&quot;</span>, <span class="st">&quot;%d&quot;</span>, <span class="st">&quot;calendar-day&quot;</span>)<span class="er">)</span></span></code></pre></div>
</div>

</div>
</div>
</div>
</div>



</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("webex-total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("webex-correct").length + " of " +
      document.getElementsByClassName("webex-solveme").length + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("webex-correct");
  } else {
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);  
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }  
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }  
  }
  
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="more-complex-apps.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="installing-r.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
